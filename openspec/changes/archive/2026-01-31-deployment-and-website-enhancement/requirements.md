# Requirements: 部署脚本与官网增强

## REQ-001: 部署脚本

### 场景
用户在 Debian 12 服务器上执行部署脚本，脚本自动检测环境并完成部署。

### 功能需求

#### REQ-001.1: Docker 一键部署
- 检测 Docker 是否安装，未安装则提示安装命令
- 检测 Docker Compose 版本
- 检测端口占用情况 (3000, 8080, 3306, 6379, 9092)
- 生成 .env 文件 (交互式或从模板)
- 拉取/构建镜像
- 启动服务并等待健康检查通过
- 显示访问地址和初始配置

#### REQ-001.2: 手动安装部署
- 检测系统环境 (Debian/Ubuntu)
- 安装依赖: Java 21, Node.js 20, MySQL 8, Redis 7
- 配置数据库和用户
- 构建后端 JAR 包
- 构建前端静态文件
- 配置 systemd 服务
- 配置 Nginx 反向代理 (可选)

#### REQ-001.3: 环境检测
- 检测 CPU 核心数 (建议 >= 2)
- 检测内存大小 (建议 >= 4GB)
- 检测磁盘空间 (建议 >= 20GB)
- 检测网络连通性
- 检测防火墙状态

### 验收标准
- [ ] 脚本在全新 Debian 12 系统上可成功执行
- [ ] 支持非交互模式 (通过参数或配置文件)
- [ ] 失败时提供明确错误信息和解决建议
- [ ] 可重复执行 (幂等性)

---

## REQ-002: 管理脚本

### 场景
运维人员通过管理脚本查看服务状态、修改端口、查看日志。

### 功能需求

#### REQ-002.1: 状态监控
```
minervia status
```
- 显示所有服务运行状态
- 显示资源使用情况 (CPU/内存)
- 显示端口占用情况
- 显示最近错误日志摘要

#### REQ-002.2: 端口管理
```
minervia ports              # 查看当前端口配置
minervia ports set <service> <port>  # 修改端口
minervia ports check        # 检测端口冲突
```

#### REQ-002.3: 日志查看
```
minervia logs <service>     # 查看指定服务日志
minervia logs -f <service>  # 实时跟踪日志
minervia logs --since 1h    # 查看最近1小时日志
```

#### REQ-002.4: 服务控制
```
minervia start [service]    # 启动服务
minervia stop [service]     # 停止服务
minervia restart [service]  # 重启服务
minervia update             # 更新到最新版本
```

#### REQ-002.5: 备��恢复
```
minervia backup             # 创建完整备份
minervia backup --db-only   # 仅备份数据库
minervia restore <file>     # 从备份恢复
minervia backup list        # 列出可用备份
```

### 验收标准
- [ ] 所有命令有帮助信息 (--help)
- [ ] 支持中英文输出 (根据系统语言)
- [ ] 危险操作需要确认
- [ ] 操作日志记录

---

## REQ-003: 部署文档

### 场景
用户阅读文档了解部署要求和步骤。

### 内容需求

#### REQ-003.1: 依赖清单
| 依赖 | 版本 | 必需 | 说明 |
|------|------|------|------|
| Docker | 24.0+ | 是(Docker部署) | 容器运行时 |
| Docker Compose | 2.20+ | 是(Docker部署) | 容器编排 |
| Java | 21+ | 是(手动部署) | 后端运行时 |
| Node.js | 20+ | 是(手动部署) | 前端构建 |
| MySQL | 8.0+ | 是 | 主数据库 |
| Redis | 7+ | 是 | 缓存/速率限制 |
| Kafka | 3.5+ | 可选 | 异步消息队列 |
| Nginx | 1.24+ | 可选 | 反向代理 |

#### REQ-003.2: 服务器配置要求
| 配置 | 最低要求 | 推荐配置 |
|------|----------|----------|
| CPU | 2核 | 4核+ |
| 内存 | 4GB | 8GB+ |
| 磁盘 | 20GB | 50GB+ SSD |
| 系统 | Debian 11/Ubuntu 22.04 | Debian 12 |
| 网络 | 公网IP | 公网IP + 域名 |

#### REQ-003.3: 端口说明
| 端口 | 服务 | 协议 | 说明 |
|------|------|------|------|
| 3000 | Frontend | HTTP | Next.js 前端 |
| 8080 | Backend | HTTP | Spring Boot API |
| 3306 | MySQL | TCP | 数据库 (内部) |
| 6379 | Redis | TCP | 缓存 (内部) |
| 9092 | Kafka | TCP | 消息队列 (内部) |

#### REQ-003.4: 部署检查清单
- [ ] 服务器满足最低配置要求
- [ ] 域名已解析到服务器IP
- [ ] 防火墙已开放必要端口
- [ ] SSL证书已准备 (生产环境)
- [ ] 邮件服务凭证已准备
- [ ] JWT密钥已生成 (256位)
- [ ] 数据库密码已设置

### 验收标准
- [ ] 文档结构清晰，易于查找
- [ ] 包含故障排除章节
- [ ] 包含常见问题解答

---

## REQ-004: 官网增强

### 场景
访客浏览官网，获得真实大学的体验。

### 功能需求

#### REQ-004.1: 学校历史页面 (/history)
- 学校创立背景 (1998年)
- 发展历程时间线
- 重要里程碑
- 校徽校训说明

#### REQ-004.2: 师资介绍页面 (/faculty)
- 院系结构
- 教授/讲师列表 (生成的虚拟人物)
- 学术背景和研究方向
- 联系方式

#### REQ-004.3: 课程目录页面 (/programs 增强)
- 本科/研究生项目分类
- 每个专业的详细介绍
- 课程设置和学分要求
- 入学要求

#### REQ-004.4: 校园生活页面 (/campus)
- 校园设施介绍
- 学生组织
- 住宿信息
- 图书馆/实验室

#### REQ-004.5: 新闻动态页面 (/news)
- 学校新闻列表
- 学术活动公告
- 招生信息

#### REQ-004.6: 学术日历页面 (/calendar)
- 学期时间安排
- 重要日期
- 假期安排

#### REQ-004.7: FAQ页面 (/faq)
- 招生常见问题
- 学费和奖学金
- 签证和住宿

#### REQ-004.8: 移动端适配
- 响应式导航菜单
- 触摸友好的交互
- 移动端优化的布局

#### REQ-004.9: 错误页面
- 404 页面
- 500 页面
- 维护页面

### 验收标准
- [ ] 所有页面支持三语言 (en/pl/zh-CN)
- [ ] 移动端体验流畅
- [ ] 页面加载速度 < 3秒
- [ ] 内容符合波兰大学风格

---

## REQ-005: Git 整理提交

### 场景
完成所有开发后，整理代码并提交。

### 功能需求
- 确保 .gitignore 正确配置
- 确保无敏感信息提交
- 创建有意义的提交信息
- 更新 README.md

### 验收标准
- [ ] 所有新文件已添加
- [ ] 提交信息符合 Conventional Commits
- [ ] 无敏感信息泄露

# Proposal: 部署脚本与官网增强

## Context

Minervia Institute 教育平台已完成核心功能开发 (后端 95%, 前端 80%)，但缺乏生产级部署工具和完整的官网内容。用户需要:
1. 一键部署脚本，支持多种环境
2. 完整的部署文档和管理工具
3. 增强官网真实性和功能完整性

## 项目完成度评估

### 后端 (95% 完成)
**已完成:**
- 15个API控制器，42个业务服务
- JWT双令牌认证 + TOTP
- Kafka异步处理 + 事务性Outbox
- 审计系统 + 完整性检查
- 邮件系统 (SendGrid/Mailgun)
- 速率限制 (Redis/MySQL双层)
- 17个测试文件

**待完善:**
- Elasticsearch集成未完全启用
- WebSocket实时通知使用场景有限
- 批量导入/导出功能缺失

### 前端 (80% 完成)
**已完成:**
- Next.js 14 App Router + TypeScript
- 三语言国际化 (en/pl/zh-CN)
- 注册向导 + 进度追踪
- 管理后台 + 学生门户
- 基础官网页面

**待完善:**
- 官网内容过于简单，缺乏真实感
- 缺少学校历史、师资、校园照片
- 课程页面无实际数据
- 移动端导航缺失
- 无404/错误页面

### 部署 (60% 完成)
**已完成:**
- Docker Compose 配置
- Dockerfile (前端/后端)
- 基础部署文档
- CI/CD 工作流 (构建/测试)

**缺失:**
- 一键部署脚本
- 管理脚本 (状态/端口/日志)
- .env.example 示例文件
- 生产环境 docker-compose.prod.yml
- 服务器配置要求文档
- 依赖冲突说明

## 约束集

### 硬约束 (不可违反)
1. **端口配置**: 默认端口 3000(前端), 8080(后端), 3306(MySQL), 6379(Redis), 9092(Kafka)
2. **环境变量**: JWT_SECRET 必须 256位, 生产环境必须通过环境变量提供
3. **数据库**: MySQL 8.0+, 使用 Flyway 迁移
4. **运行时**: Java 21+, Node.js 20+
5. **官网风格**: 波兰学府厚重感，现代简约，国际开放性

### 软约束 (建议遵循)
1. 部署脚本应支持 Debian/Ubuntu, CentOS/RHEL, macOS
2. 管理脚本应提供中英文界面
3. 官网内容应符合波兰教育法和GDPR合规
4. 所有用户界面文本使用 i18n

### 依赖关系
1. 部署脚本 → 依赖 Docker 24.0+ 或 手动安装环境
2. 管理脚本 → 依赖部署完成
3. 官网增强 → 可独立进行

## 成功判据

### 部署脚本
- [ ] 支持 Docker 一键部署
- [ ] 支持手动安装部署
- [ ] 自动检测系统环境
- [ ] 提供回滚机制
- [ ] 幂等性 (可重复执行)

### 管理脚本
- [ ] 查看服务状态
- [ ] 查看/修改端口配置
- [ ] 查看日志
- [ ] 启动/停止/重启服务
- [ ] 备份/恢复数据

### 文档
- [ ] 完整依赖清单
- [ ] 服务器配置要求
- [ ] 端口说明
- [ ] 部署检查清单
- [ ] 故障排除指南

### 官网增强
- [ ] 学校历史页面
- [ ] 师资介绍页面
- [ ] 校园照片展示
- [ ] 完整课程目录
- [ ] 移动端适配
- [ ] 404/错误页面

## 风险评估

| 风�� | 级别 | 缓解措施 |
|------|------|----------|
| 部署脚本兼容性 | 中 | 多系统测试，提供手动安装选项 |
| 端口冲突 | 低 | 脚本检测端口占用，支持自定义 |
| 官网内容真实性 | 中 | 参考真实波兰大学官网风格 |
| 环境变量泄露 | 高 | 使用 .env.example，不提交实际值 |

## 实施优先级

1. **P0 - 部署脚本** (核心需求)
2. **P0 - 部署文档** (核心需求)
3. **P1 - 管理脚本** (运维需求)
4. **P1 - 官网增强** (业务需求)
5. **P2 - Git整理提交** (收尾工作)

# Minervia Institute - Production Environment Configuration
# Copy this file to .env.prod and fill in the actual values
# IMPORTANT: Never commit .env.prod to version control

# =============================================================================
# REQUIRED - These must be set for production deployment
# =============================================================================

# Database Configuration
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD_HERE
DATABASE_URL=jdbc:mysql://mysql:3306/minervia
DATABASE_USERNAME=minervia

# MySQL Root Password (for Docker container)
MYSQL_ROOT_PASSWORD=CHANGE_ME_ROOT_PASSWORD_HERE

# JWT Configuration (MUST be at least 256 bits / 32 characters)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_256_BIT_SECRET_KEY_HERE_MINIMUM_32_CHARACTERS
JWT_ACCESS_EXPIRATION=1800000      # 30 minutes
JWT_REFRESH_EXPIRATION=1209600000  # 14 days

# Email Configuration (Required for registration flow)
MAIL_HOST=smtp.sendgrid.net
MAIL_PORT=587
MAIL_USERNAME=apikey
MAIL_PASSWORD=CHANGE_ME_SENDGRID_API_KEY_HERE

# Production Domain Configuration
NEXT_PUBLIC_API_URL=https://yourdomain.com
NEXT_PUBLIC_WS_URL=wss://yourdomain.com

# WebSocket Allowed Origins (comma-separated)
WEBSOCKET_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# OPTIONAL - These have sensible defaults
# =============================================================================

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# Kafka Configuration
KAFKA_BOOTSTRAP_SERVERS=kafka:9092

# OpenAI Configuration (for LLM-enhanced identity generation)
OPENAI_API_KEY=
OPENAI_BASE_URL=https://api.openai.com
OPENAI_MODEL=gpt-4o-mini
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=220

# Elasticsearch Configuration (for audit log search)
MINERVIA_AUDIT_ELASTICSEARCH_ENABLED=false
MINERVIA_AUDIT_ELASTICSEARCH_URL=http://elasticsearch:9200
MINERVIA_AUDIT_ELASTICSEARCH_INDEX=audit-logs

# Webhook Signing Keys (for email bounce handling)
EMAIL_WEBHOOK_SIGNING_KEY=
MAILGUN_WEBHOOK_SIGNING_KEY=
SENDGRID_WEBHOOK_PUBLIC_KEY=

# =============================================================================
# PRODUCTION DEPLOYMENT SETTINGS
# =============================================================================

# Spring Profile
SPRING_PROFILES_ACTIVE=prod

# Application Version (auto-generated during deployment)
VERSION=latest

# Docker Compose Project Name
COMPOSE_PROJECT_NAME=minervia

# Port Configuration (internal container ports, exposed via Nginx)
BACKEND_PORT=8080
FRONTEND_PORT=3000
